### Теория на сегодня: Flask и декорирование

#### Введение

Мы уже изучили внешнюю часть разработки сайта — фронтенд. Теперь мы переходим к бэкенду, к разработке внутренней части.

**План урока:**
1. Узнаем, что такое Flask и для чего он используется.
2. Создадим и запустим простое веб-приложение на Flask.
3. Разберём основные концепции и структуры фреймворка Flask.

#### Что такое Flask?

**Flask** — это микро-фреймворк для разработки веб-приложений на языке Python. Он называется "микро", потому что не принуждает разработчика использовать определённые инструменты или библиотеки, предоставляя базовый набор возможностей и свободу выбора остальных компонентов.

Существует множество библиотек, которые пригодятся для веб-разработки. Две самые популярные — Flask и Django. Flask проще в освоении, поэтому с него мы и начнём.

#### Установка Flask

Чтобы начать работу с Flask, нужно установить его в вашу рабочую среду (например, в PyCharm):

1. Открываем файл `main.py`, закрываем остальные файлы.
2. В левом нижнем углу заходим в **Python Packages**.
3. Вводим **flask** и нажимаем **Install package**.

#### Структура проекта

При разработке проекта с использованием Flask обязательно создаются две папки:

- **templates** — для хранения HTML-файлов и шаблонов страниц.
- **static** — для хранения статических файлов (CSS, JavaScript, изображения).

**Создание структуры:**
1. В корневой директории проекта создайте папки `templates` и `static`.
2. Внутри `static` создайте поддиректории `css` и `image`.

#### Базовый код для запуска Flask

1. Импортируем класс Flask:
   ```python
   from flask import Flask
   ```

2. Создаём объект Flask:
   ```python
   app = Flask(__name__)
   ```

3. Добавляем маршруты:
   ```python
   @app.route("/")
   def hello_world():
       return "Hello World!"
   ```

4. Запуск приложения:
   ```python
   if __name__ == "__main__":
       app.run()
   ```

5. Запустите программу и перейдите по указанной в консоли ссылке. Вы увидите базовое веб-приложение.

#### Работа с маршрутами

Маршруты — основа Flask. Главная страница обозначается одним слешем (`/`). Пример расширения маршрута:

```python
@app.route("/new/")
def new():
    return "New page"
```

Дополнения можно писать и на русском языке, а также использовать множественное декорирование — несколько адресов для одной страницы.

#### Пример с переменными и условиями

1. Пример с использованием переменной в маршруте:
   ```python
   @app.route("/<name>/")
   def hello_name(name="незнакомец"):
       return f"Привет, {name}"
   ```

2. Пример с проверкой пароля:
   ```python
   @app.route("/<password>/")
   def check_password(password=None):
       if password == "1234":
           return "Доступ разрешён"
       else:
           return "Доступ запрещён"
   ```

#### Встраивание HTML в Flask

1. Встроенный HTML:
   ```python
   @app.route("/")
   def hello_world():
       html = """
       <h1>Тестовый запуск локального сервера</h1>
       <p>А это просто текст</p>
       """
       return html
   ```

2. Использование функции `render_template`:
   ```python
   from flask import Flask, render_template

   @app.route("/")
   def hello_world():
       return render_template("index.html")
   ```

#### Создание страниц с навигацией

1. Подключаем Bootstrap и создаём навигацию:

   ```html
   <ul class="nav nav-pills">
       <li class="nav-item">
           <a class="nav-link active" href="/">Фильмы</a>
       </li>
       <li class="nav-item">
           <a class="nav-link" href="/person/">Герои фильмов</a>
       </li>
   </ul>
   ```

2. В `main.py` подключаем шаблоны страниц:
   ```python
   @app.route("/")
   def films():
       return render_template("index.html")

   @app.route("/person/")
   def person():
       return render_template("main.html")
   ```

3. Обратите внимание на правильное указание относительных путей и на структуру папок.

#### Итоги урока

Сегодня мы:
- Узнали, что такое Flask и как он используется.
- Создали и запустили простое веб-приложение на Flask.
- Разобрали основные концепции и структуры фреймворка Flask.